# Stock Exchange

The following is a documentation on what this code base entails.

## Installation

    Please follow these installation steps carefully.

* Install NodeJS
* Install Yarn (or npm comes bundled with NodeJS)
* Install docker and docker compose.
* Rename `env.sample` to `.env`. Please note the leading period `'.'` in `.env`
* Run `yarn start` or `npm start`. (This basically runs `docker-compose up --build`)
* Once the startup process is complete the API should be available on: http://localhost:3000/api

* A simple test for the API with data would be structured as :
  http://localhost:3000/api?countrycode=US&Category=Automobile&BaseBid=9 .

This should return a simple message saying: `"Winner = C3"`

## Tests

This project comes equipped with unit an integration tests.
In order to test, please do the following:

* Ensure that you have followed the steps listed under installation (especially installiing docker, docker-compose and NodeJS) before following these steps.
* Run `yarn test` or `npm test`. It starts up the containers and executes the test within the container. A code coverage calculation tool (`Istanbul`) is used to also provide coverage results for the included tests.
  You should see the following results:

<img src ="https://user-images.githubusercontent.com/1958765/37858516-c07fdd28-2f05-11e8-9b30-00e1ebeb776e.png"/>
As well this:

<img src="https://user-images.githubusercontent.com/1958765/37858518-c53fcf76-2f05-11e8-9cbb-9d95a2549890.png" />

Istanbul generates a directory called coverage under `<project root>/app/coverage`.
Double clicking the index.html file will show the coverage reports interactively on a browser.

## How the code works

The repository / project code has the following folder structure:

* <b>app</b> - This contains the server code for the api
* <b>bin</b> - This contains entrypoint scripts and travis scripts
* <b>logs</b> - This will be the location for the log output generated by the API during normal operation or during test run.

## app directory

The app directory houses the server code as well as the Dockerfile for the exchange service. The list of directories and what they contain is as follows:

* <b>config</b> - the database configuration file (config.js) and the docker entrypoint script (entrypoint.sh) are place in this directory
* <b>exchange</b> - This contains the exchange service logic and request handler in the file call called index.js. It also has the Log manager class exported from the log.js file.
* <b>migrations</b> - This houses the migration file for creating the companies database table.
* <b>models</b> - the database schema is placed in the model file. This allows sequelize (the orm used on the project) know exactly what structure the database tables have as well as what their data types are and uses that to map the database tables.
* <b>seeders</b> - The test data provided by the question was used to create database seeds to test the API logic.
* <b>test</b> - the tests for the api

Asides the directories listed above, the following files are also present:

* .dockerignore
* .editorconfig
* app.js
* Dockerfile
* package.json
* server.js
* yarn.lock

## Exchange API Logic

The API was implemented following the below specifications:
1. A bid is submitted via an API call passing the following paramteres

    - Country
    -  